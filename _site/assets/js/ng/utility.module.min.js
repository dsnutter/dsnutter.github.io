angular.module("lec.utility",["lec.segmented","lec.units"]).controller("lec.utility.controller.fractionalInches",["$scope","lec.units.service.calculate","lec.units.service.verify",function(a,b,c){a.unitslabel="inches",a.showresult=!1,a.result=null,a.calculate=function(){if(a.showresult=!1,a.result=null,!isNaN(a.decimal)){var d="e",e=16;if(c.units(d,e)){var f=b.approximateUnits(a.decimal,e);0!=f&&(a.showresult=!0,a.result=f.display)}}}}]).controller("lec.utility.controller.segmentedBowlRingCalculator",["$http","$scope","lec.units.service.verify","lec.units.constants","lec.units.service.accessors","lec.segmented.constants","lec.segmented.service.calculate","lec.units.service.calculate","lec.segmented.service.draw",function(a,b,c,d,e,f,g,h,i){function j(){b.form.diameter=-1,b.form.numberSegments=-1,b.form.width=-1,b.showresult=!1,b.strCutAngle="",b.strDiameter="",b.strDiameterMax="",b.strLength="",b.strWidth="",b.strDiameter="",b.strResults=""}b.form={units:"",unitsdisplay:"",width:"",diameter:"",numberSegments:""},b.form.units=d.english.abbrev,b.status={closeOthers:!0,isConfigOpen:!0,isResultsOpen:!1,isResultsDisabled:!0},b.measurementTypeChange=function(){b.form.unitsdisplay=!1,b.rangeWidths=!1,b.rangeDiameters=!1;var c="/assets/js/ng/data.json";switch(a.get(c).success(function(a){"e"==b.form.units?(b.rangeWidths=a.e.width,b.rangeDiameters=a.e.diameter):(b.rangeWidths=a.m.width,b.rangeDiameters=a.m.diameter)}),b.form.units){case d.english.abbrev:b.form.unitsdisplay=d.english.label;break;case d.metric.abbrev:b.form.unitsdisplay=d.metric.label}j()},b.calculate=function(){var a=!1,c=parseFloat(b.form.numberSegments);if(b.form.diameter<=0||b.form.numberSegments<=0||b.form.width<=0||isNaN(parseFloat(b.form.diameter))||isNaN(c)||isNaN(parseFloat(b.form.width)))return j(),b.status.isConfigOpen=!0,b.status.isResultsOpen=!1,b.status.isResultsDisabled=!0,a;var d=g.cutAngle(c);b.strCutAngle=d+" degrees";var f={approx:{str:0,decimal:0},exact:0},k={approx:{str:0,decimal:0},exact:0},l={approx:{str:0,decimal:0},exact:0},m=e.resolution(b.form.units),n=parseFloat(b.form.diameter)+parseFloat(b.form.width);k.exact=g.circumference.diameterBased(n),l.exact=k.exact/c;var o=h.approximateUnits(l.exact,m);if(0==o)return a;l.approx.str=o.display,l.approx.decimal=o.value;var p=g.circumference.segmentLengthBased(l.approx.decimal,c),q=p/Math.PI;if(o=h.approximateUnits(p,m),0==o)return a;if(k.approx.str=o.display,k.approx.decimal=o.value,o=h.approximateUnits(q,m),0==o)return a;f.approx.str=o.display,f.approx.decimal=o.value;var r=" "+e.unitlabel(b.form.units);return b.strLength=l.exact+r+", which is approximately "+l.approx.str+r,b.strDiameter=h.approximateUnits(b.form.diameter,m).display+r,b.strDiameterMax="approximately "+f.approx.str+r,b.strWidth=h.approximateUnits(b.form.width,m).display+r,b.showresult=!0,i.ringWithLabels(b.form.numberSegments),b.strResults="Results are listed below.",b.status.isConfigOpen=!1,b.status.isResultsOpen=!0,b.status.isResultsDisabled=!1,a},j(),b.rangeSegments=f.segments,b.measurementTypeChange()}]);