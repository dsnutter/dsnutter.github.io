angular.module("lec.units",[]).constant("lec.units.constants",{english:{abbrev:"e",label:"inches",resolutions:{default:16,arr:new Array(2,4,8,16,32,64)}},metric:{abbrev:"m",label:"cm",resolutions:{default:10,arr:new Array(10)}},pixel:{abbrev:"p",label:"px",resolutions:{default:1,arr:new Array(1)}}}).value("lec.units.properties",{type:"e",resolution:16,pixelsPerType:0}).factory("lec.units.service.accessors",["lec.units.constants",function(a){return{resolution:function(b){var c=!1;switch(b){case a.english.abbrev:c=a.english.resolutions.default;break;case a.metric.abbrev:c=a.metric.resolutions.default;break;case a.pixel.abbrev:c=a.pixel.resolutions.default}return c},unitlabel:function(b){var c=!1;switch(b){case a.english.abbrev:c=a.english.label;break;case a.metric.abbrev:c=a.metric.label;break;case a.pixel.abbrev:c=a.pixel.label}return c}}}]).factory("lec.units.service.calculate",["lec.units.properties",function(a){return gcd=function(a,b){if(a=Math.abs(a),b=Math.abs(b),a<b&&(temp=a,a=b,b=temp),0==b)return a;for(r=a%b;r>0;)a=b,b=r,r=a%b;return b},{approximateUnits:function(a,b){var d,e,f,g,h,i,j,k,c=!1;return isNaN(parseFloat(a))||Math.round(b)!==b||(d=Math.floor(a),e=a-d,f=e*b,g=Math.round(f),0==d&&0==g&&(g=1),h=b,i=gcd(g,h),i>1&&(g/=i,h/=i),0==g?(j=""+d,k=d):10==b?(k=d+g/h,j=""+k):1==g&&1==h?(k=d+1,j=""+k):(j=(d>0?d+" and ":"")+g+"/"+h,k=d+g/h),c={display:j,value:k}),c},convertTo:function(a,b){var c=!1,d=2.54;return isNaN(parseFloat(b))||("e"==a?c=b/d:"m"==a&&(c=b*d)),c},pixelRatio:function(b,c){return Math.round(b)==b&&Math.round(c)==c?a.pixelsPerType=c/b:a.pixelsPerType=0,a.pixelsPerType}}}]).factory("lec.units.service.verify",["lec.units.constants","lec.units.properties",function(a,b){return{units:function(b,c){var d=!1;switch(b){case a.english.abbrev:if(a.english.resolutions.arr.indexOf(c)==-1)return!1;d=!0;break;case a.metric.abbrev:case a.pixel.abbrev:d=!0}return d}}}]);